# Отчет по ИДЗ №1
## Лопаткин Пётр Сергеевич БПИ234

### Тестовые файлы:
Все тестовые файлы находятся в папке `testFiles`, результаты работы с ними изложены в этой же папке с постфиксом _o, а также в отчете.

### Правила работы программ:
Все программы в случае некорректного срабатывания, будут прерваны с сообщением об ошибке в поток вывода ошибок, все процессы будут завершены и программа должна остановить свою работу. В случае подачи некорректных данных(например директории, а не файла) программа также остановит своё выполнение. Формат передачи данных указан в каждом пункте отчета. Пример ответа в случае некорректной отработки: 
```bash
Error reading input file: Is a directory
Child process 1 failed
```
В задачах где используются именованные каналы может произойти проблема с тем, что в случае некорректного исполнения придется перейти в директорию `/tmp` и удалить там каналы `fifo1` и `fifo2`, после этого удастся дальше работать. Со своей стороны я всё удаляю в случае некорректного завершения, но почему-то бывает такое, что иногда это не происходит, я не знаю почему. `¯\_(ツ)_/¯`

### Примечения:
Я использовал CMake, чтобы немного упростить сборку и тесты, поэтому в отчете указаны мои таргеты компиляции, вы можете просто отдельно в папках компилировать каждый файл используя `gcc -0 <target_name> <target>` и всё будет прекрасно работать.

### Оценка 4
#### Схема взаимодействия:
```
Процесс 1 (Родительский)
       |
       |--- Создает fifo1 и fifo2
       |--- Запускает Процесс 2 и Процесс 3
       |--- Читает входной файл (input_file)
       |--- Передает данные через fifo1
       |--- Получает результаты через fifo2
       |--- Записывает в выходной файл (output_file)
       |--- Удаляет fifo1 и fifo2
       |
       v
Процесс 2 (Дочерний 1)
       |
       |--- Получает данные из fifo1
       |--- Обрабатывает данные
       |--- Передает результаты через fifo2
       |
       v
Процесс 3 (Дочерний 2)
       |
       |--- Получает результаты из fifo2
       |--- Записывает в выходной файл (output_file)
```
#### Способ взаимодействия:
```bash
./program <input_file> <output_file>
```
#### Пример работы:

```bash
#Консоль:
./M04 ../testFiles/a.cpp a.txt
```

```cpp
#Файл:
int: 28
return: 6
if: 4
else: 0
while: 3
```

#### Изменения относительно прошлой программы.

### Оценка 5
#### Схема взаимодействия:
```
Процесс 1 (Родительский процесс)
       |
       |--- Создает fifo1 и fifo2
       |
       |--- Запускает Процесс 2 и Процесс 3
       |
       |--- Читает данные из входного файла (input_file)
       |--- Передает данные через fifo1 в Процесс 2
       |
       |--- Получает результаты через fifo2 от Процесса 3
       |--- Записывает результаты в выходной файл (output_file)
       |
       |--- Удаляет fifo1 и fifo2 после завершения
       |
       v
Процесс 2 (Дочерний процесс 1)
       |
       |--- Получает данные из fifo1
       |--- Обрабатывает данные (подсчитывает ключевые слова)
       |--- Передает результаты через fifo2 в Процесс 3
       |
       v
Процесс 3 (Дочерний процесс 2)
       |
       |--- Получает результаты из fifo2
       |--- Записывает результаты в выходной файл (output_file)
```
#### Способ взаимодействия:
```bash
./program <input_file> <output_file>
```
#### Пример работы:

```bash
#Консоль:
./M05 ../testFiles/a.cpp a.txt
```

```cpp
#Файл:
int: 28
return: 6
if: 4
else: 0
while: 3
```

#### Отличия от предыдущей программы:
Данная программа использует всё также 3 родственных процесса, но работает с именованными каналами.

### Оценка 6
#### Схема взаимодействия:
```
Процесс 1 (Родительский)        Процесс 2 (Дочерний)
       |                               |
       |--- pipe1 (запись) ---->       |
       |                               | --- Обрабатывает входящие сообщения и возвращает данные
       |<--- pipe2 (чтение) ----       |
       |                               |
       |
       |--- Читает входной файл (input_file)
       |--- Записывает в выходной файл (output_file)
```
#### Способ взаимодействия:
```bash
./program <input_file> <output_file>
```
#### Пример работы:

```bash
#Консоль:
./M06 ../testFiles/a.cpp a.txt
```

```cpp
#Файл:
int: 28
return: 6
if: 4
else: 0
while: 3
```

#### Отличия от предыдущей программы:
Данная программа использует уже 2 родственных процесса и работает с неименованными каналами.

### Оценка 7
#### Схема взаимодействия:
```
Процесс 1 (Родительский)        Процесс 2 (Дочерний)
       |                               |
       |--- fifo1 (запись) ---->       |
       |                               | --- Обрабатывает входящие сообщения и возвращает данные
       |<--- fifo2 (чтение) ----       |
       |                               |
       |
       |--- Читает входной файл (input_file)
       |--- Записывает в выходной файл (output_file)
```
#### Способ взаимодействия:
```bash
./program <input_file> <output_file>
```
#### Пример работы:

```bash
#Консоль:
./M07 ../testFiles/a.cpp a.txt
```

```cpp
#Файл:
int: 28
return: 6
if: 4
else: 0
while: 3
```

#### Отличия от предыдущей программы:
Данная программа использует всё также 2 родственных процесса и работает с именованными каналами.

### Оценка 8
#### Схема взаимодействия:
```
Программа 1 (Процесс 1)        Программа 2 (Процесс 2)
       |                               |
       |--- fifo1 (запись) ---->       |
       |                               | --- Обрабатывает входящие сообщения и возвращает данные
       |<--- fifo2 (чтение) ----       |
       |                               |
       |
       |--- Читает входной файл (input_file)
       |--- Записывает в выходной файл (output_file)
```
#### Способ взаимодействия:
```bash
./client <input_file> <output_file>
# В разных консолях
./server
```
#### Пример работы:

```bash
#Консоль:
./M08RW ../testFiles/a.cpp a.txt
./M08P
```

```cpp
#Файл:
int: 28
return: 6
if: 4
else: 0
while: 3
```

#### Отличия от предыдущей программы:
Данная программа использует уже 2 не родственных процесса(разные программы) и работает с именованными каналами.


### Оценка 9
#### Схема взаимодействия:
```
Программа 1 (Процесс 1)        Программа 2 (Процесс 2)
       |                               |
       |--- fifo1 (запись) ---->       |
       |       (многократно)           | --- Обрабатывает входящие потоки и возвращает данные
       |<--- fifo2 (чтение) ----       |
       |                               |
       |
       |--- Читает входной файл (input_file)
       |--- Записывает в выходной файл (output_file)
```
#### Способ взаимодействия:
```bash
./client <input_file> <output_file>
# В разных консолях
./server
```
#### Пример работы:

```bash
#Консоль:
./M09RW ../testFiles/a.cpp a.txt
./M09P
```

```cpp
#Файл:
int: 28
return: 6
if: 4
else: 0
while: 3
```

#### Отличия от предыдущей программы:
Данная программа использует уже 2 не родственных процесса(разные программы) и работает с именованными каналами, а также имеет ужатый буфер, то есть она будет в маленьком буфере многократно передавать информацию через каналы, пока файл не кончится.

### Оценка 10
#### Схема взаимодействия:
```
Программа 1 (Процесс 1)        Программа 2 (Процесс 2)
       |                               |
       |--- msg1 (отправка) ---->      |
       |       (многократно)           | --- Обрабатывает входящие сообщения и возвращает данные
       |<--- msg2 (получение) ----     |
       |                               | 
       |
       |--- Читает входной файл (input_file)
       |--- Записывает в выходной файл (output_file)
```
#### Способ взаимодействия:
```bash
./client <input_file> <output_file>
# В разных консолях
./server
```
#### Пример работы:

```bash
#Консоль:
./M10RW ../testFiles/a.cpp a.txt
./M10P
```

```cpp
#Файл:
int: 28
return: 6
if: 4
else: 0
while: 3
```

#### Отличия от предыдущей программы:
Данная программа использует уже 2 не родственных процесса(разные программы) и работает с очередью сообщений, буфер также ужат и мы читаем файл до тех пор пока он не закончится.